var $=jQuery;$(document).ready(function(){threeJSbackground.init(),work.init()}),threeJSbackground={init:function(){THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(vertex){this.positionWorld.copy(vertex.positionWorld),this.positionScreen.copy(vertex.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var _object,_objectCount,_vertex,_vertexCount,_face,_faceCount,_line,_lineCount,_sprite,_spriteCount,_modelMatrix,_objectPool=[],_objectPoolLength=0,_vertexPool=[],_vertexPoolLength=0,_facePool=[],_facePoolLength=0,_linePool=[],_linePoolLength=0,_spritePool=[],_spritePoolLength=0,_renderData={objects:[],lights:[],elements:[]},_vector3=new THREE.Vector3,_vector4=new THREE.Vector4,_clipBox=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),_boundingBox=new THREE.Box3,_points3=new Array(3),_viewMatrix=new THREE.Matrix4,_viewProjectionMatrix=new THREE.Matrix4,_modelViewProjectionMatrix=new THREE.Matrix4,_normalMatrix=new THREE.Matrix3,_frustum=new THREE.Frustum,_clippedVertex1PositionScreen=new THREE.Vector4,_clippedVertex2PositionScreen=new THREE.Vector4;this.projectVector=function(vector,camera){console.warn("THREE.Projector: .projectVector() is now vector.project()."),vector.project(camera)},this.unprojectVector=function(vector,camera){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),vector.unproject(camera)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var renderList=new function(){var normals=[],colors=[],uvs=[],object=null,material=null,normalMatrix=new THREE.Matrix3;function projectVertex(vertex){var position=vertex.position,positionWorld=vertex.positionWorld,positionScreen=vertex.positionScreen;positionWorld.copy(position).applyMatrix4(_modelMatrix),positionScreen.copy(positionWorld).applyMatrix4(_viewProjectionMatrix);var invW=1/positionScreen.w;positionScreen.x*=invW,positionScreen.y*=invW,positionScreen.z*=invW,vertex.visible=positionScreen.x>=-1&&positionScreen.x<=1&&positionScreen.y>=-1&&positionScreen.y<=1&&positionScreen.z>=-1&&positionScreen.z<=1}function checkTriangleVisibility(v1,v2,v3){return!0===v1.visible||!0===v2.visible||!0===v3.visible||(_points3[0]=v1.positionScreen,_points3[1]=v2.positionScreen,_points3[2]=v3.positionScreen,_clipBox.intersectsBox(_boundingBox.setFromPoints(_points3)))}function checkBackfaceCulling(v1,v2,v3){return(v3.positionScreen.x-v1.positionScreen.x)*(v2.positionScreen.y-v1.positionScreen.y)-(v3.positionScreen.y-v1.positionScreen.y)*(v2.positionScreen.x-v1.positionScreen.x)<0}return{setObject:function(value){material=(object=value).material,normalMatrix.getNormalMatrix(object.matrixWorld),normals.length=0,colors.length=0,uvs.length=0},projectVertex:projectVertex,checkTriangleVisibility:checkTriangleVisibility,checkBackfaceCulling:checkBackfaceCulling,pushVertex:function(x,y,z){(_vertex=getNextVertexInPool()).position.set(x,y,z),projectVertex(_vertex)},pushNormal:function(x,y,z){normals.push(x,y,z)},pushColor:function(r,g,b){colors.push(r,g,b)},pushUv:function(x,y){uvs.push(x,y)},pushLine:function(a,b){var v1=_vertexPool[a],v2=_vertexPool[b];v1.positionScreen.copy(v1.position).applyMatrix4(_modelViewProjectionMatrix),v2.positionScreen.copy(v2.position).applyMatrix4(_modelViewProjectionMatrix),!0===clipLine(v1.positionScreen,v2.positionScreen)&&(v1.positionScreen.multiplyScalar(1/v1.positionScreen.w),v2.positionScreen.multiplyScalar(1/v2.positionScreen.w),(_line=getNextLineInPool()).id=object.id,_line.v1.copy(v1),_line.v2.copy(v2),_line.z=Math.max(v1.positionScreen.z,v2.positionScreen.z),_line.renderOrder=object.renderOrder,_line.material=object.material,object.material.vertexColors===THREE.VertexColors&&(_line.vertexColors[0].fromArray(colors,3*a),_line.vertexColors[1].fromArray(colors,3*b)),_renderData.elements.push(_line))},pushTriangle:function(a,b,c){var v1=_vertexPool[a],v2=_vertexPool[b],v3=_vertexPool[c];if(!1!==checkTriangleVisibility(v1,v2,v3)&&(material.side===THREE.DoubleSide||!0===checkBackfaceCulling(v1,v2,v3))){(_face=getNextFaceInPool()).id=object.id,_face.v1.copy(v1),_face.v2.copy(v2),_face.v3.copy(v3),_face.z=(v1.positionScreen.z+v2.positionScreen.z+v3.positionScreen.z)/3,_face.renderOrder=object.renderOrder,_face.normalModel.fromArray(normals,3*a),_face.normalModel.applyMatrix3(normalMatrix).normalize();for(var i=0;i<3;i++){var normal=_face.vertexNormalsModel[i];normal.fromArray(normals,3*arguments[i]),normal.applyMatrix3(normalMatrix).normalize(),_face.uvs[i].fromArray(uvs,2*arguments[i])}_face.vertexNormalsLength=3,_face.material=object.material,_renderData.elements.push(_face)}}}};function addObject(object){(_object=function(){if(_objectCount===_objectPoolLength){var object=new THREE.RenderableObject;return _objectPool.push(object),_objectPoolLength++,_objectCount++,object}return _objectPool[_objectCount++]}()).id=object.id,_object.object=object,_vector3.setFromMatrixPosition(object.matrixWorld),_vector3.applyMatrix4(_viewProjectionMatrix),_object.z=_vector3.z,_object.renderOrder=object.renderOrder,_renderData.objects.push(_object)}function pushPoint(_vector4,object,camera){var invW=1/_vector4.w;_vector4.z*=invW,_vector4.z>=-1&&_vector4.z<=1&&((_sprite=function(){if(_spriteCount===_spritePoolLength){var sprite=new THREE.RenderableSprite;return _spritePool.push(sprite),_spritePoolLength++,_spriteCount++,sprite}return _spritePool[_spriteCount++]}()).id=object.id,_sprite.x=_vector4.x*invW,_sprite.y=_vector4.y*invW,_sprite.z=_vector4.z,_sprite.renderOrder=object.renderOrder,_sprite.object=object,_sprite.rotation=object.rotation,_sprite.scale.x=object.scale.x*Math.abs(_sprite.x-(_vector4.x+camera.projectionMatrix.elements[0])/(_vector4.w+camera.projectionMatrix.elements[12])),_sprite.scale.y=object.scale.y*Math.abs(_sprite.y-(_vector4.y+camera.projectionMatrix.elements[5])/(_vector4.w+camera.projectionMatrix.elements[13])),_sprite.material=object.material,_renderData.elements.push(_sprite))}function getNextVertexInPool(){if(_vertexCount===_vertexPoolLength){var vertex=new THREE.RenderableVertex;return _vertexPool.push(vertex),_vertexPoolLength++,_vertexCount++,vertex}return _vertexPool[_vertexCount++]}function getNextFaceInPool(){if(_faceCount===_facePoolLength){var face=new THREE.RenderableFace;return _facePool.push(face),_facePoolLength++,_faceCount++,face}return _facePool[_faceCount++]}function getNextLineInPool(){if(_lineCount===_linePoolLength){var line=new THREE.RenderableLine;return _linePool.push(line),_linePoolLength++,_lineCount++,line}return _linePool[_lineCount++]}function painterSort(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function clipLine(s1,s2){var alpha1=0,alpha2=1,bc1near=s1.z+s1.w,bc2near=s2.z+s2.w,bc1far=-s1.z+s1.w,bc2far=-s2.z+s2.w;return bc1near>=0&&bc2near>=0&&bc1far>=0&&bc2far>=0||!(bc1near<0&&bc2near<0||bc1far<0&&bc2far<0)&&(bc1near<0?alpha1=Math.max(alpha1,bc1near/(bc1near-bc2near)):bc2near<0&&(alpha2=Math.min(alpha2,bc1near/(bc1near-bc2near))),bc1far<0?alpha1=Math.max(alpha1,bc1far/(bc1far-bc2far)):bc2far<0&&(alpha2=Math.min(alpha2,bc1far/(bc1far-bc2far))),!(alpha2<alpha1)&&(s1.lerp(s2,alpha1),s2.lerp(s1,1-alpha2),!0))}this.projectScene=function(scene,camera,sortObjects,sortElements){_faceCount=0,_lineCount=0,_spriteCount=0,_renderData.elements.length=0,!0===scene.autoUpdate&&scene.updateMatrixWorld(),null===camera.parent&&camera.updateMatrixWorld(),_viewMatrix.copy(camera.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix,_viewMatrix),_frustum.setFromMatrix(_viewProjectionMatrix),_objectCount=0,_renderData.objects.length=0,_renderData.lights.length=0,function projectObject(object){if(!1!==object.visible){if(object instanceof THREE.Light)_renderData.lights.push(object);else if(object instanceof THREE.Mesh||object instanceof THREE.Line||object instanceof THREE.Points){if(!1===object.material.visible)return;if(!0===object.frustumCulled&&!1===_frustum.intersectsObject(object))return;addObject(object)}else if(object instanceof THREE.Sprite){if(!1===object.material.visible)return;if(!0===object.frustumCulled&&!1===_frustum.intersectsSprite(object))return;addObject(object)}for(var children=object.children,i=0,l=children.length;i<l;i++)projectObject(children[i])}}(scene),!0===sortObjects&&_renderData.objects.sort(painterSort);for(var objects=_renderData.objects,o=0,ol=objects.length;o<ol;o++){var object=objects[o].object,geometry=object.geometry;if(renderList.setObject(object),_modelMatrix=object.matrixWorld,_vertexCount=0,object instanceof THREE.Mesh){if(geometry instanceof THREE.BufferGeometry){var attributes=geometry.attributes,groups=geometry.groups;if(void 0===attributes.position)continue;for(var i=0,l=(positions=attributes.position.array).length;i<l;i+=3)renderList.pushVertex(positions[i],positions[i+1],positions[i+2]);if(void 0!==attributes.normal){var normals=attributes.normal.array;for(i=0,l=normals.length;i<l;i+=3)renderList.pushNormal(normals[i],normals[i+1],normals[i+2])}if(void 0!==attributes.uv){var uvs=attributes.uv.array;for(i=0,l=uvs.length;i<l;i+=2)renderList.pushUv(uvs[i],uvs[i+1])}if(null!==geometry.index){var indices=geometry.index.array;if(groups.length>0)for(var g=0;g<groups.length;g++){var group=groups[g];for(i=group.start,l=group.start+group.count;i<l;i+=3)renderList.pushTriangle(indices[i],indices[i+1],indices[i+2])}else for(i=0,l=indices.length;i<l;i+=3)renderList.pushTriangle(indices[i],indices[i+1],indices[i+2])}else for(i=0,l=positions.length/3;i<l;i+=3)renderList.pushTriangle(i,i+1,i+2)}else if(geometry instanceof THREE.Geometry){var vertices=geometry.vertices,faces=geometry.faces,faceVertexUvs=geometry.faceVertexUvs[0];_normalMatrix.getNormalMatrix(_modelMatrix);for(var material=object.material,isMultiMaterial=Array.isArray(material),v=0,vl=vertices.length;v<vl;v++){var vertex=vertices[v];if(_vector3.copy(vertex),!0===material.morphTargets)for(var morphTargets=geometry.morphTargets,morphInfluences=object.morphTargetInfluences,t=0,tl=morphTargets.length;t<tl;t++){var influence=morphInfluences[t];if(0!==influence){var targetVertex=morphTargets[t].vertices[v];_vector3.x+=(targetVertex.x-vertex.x)*influence,_vector3.y+=(targetVertex.y-vertex.y)*influence,_vector3.z+=(targetVertex.z-vertex.z)*influence}}renderList.pushVertex(_vector3.x,_vector3.y,_vector3.z)}for(var f=0,fl=faces.length;f<fl;f++){var face=faces[f];if(void 0!==(material=!0===isMultiMaterial?object.material[face.materialIndex]:object.material)){var side=material.side,v1=_vertexPool[face.a],v2=_vertexPool[face.b],v3=_vertexPool[face.c];if(!1!==renderList.checkTriangleVisibility(v1,v2,v3)){var visible=renderList.checkBackfaceCulling(v1,v2,v3);if(side!==THREE.DoubleSide){if(side===THREE.FrontSide&&!1===visible)continue;if(side===THREE.BackSide&&!0===visible)continue}(_face=getNextFaceInPool()).id=object.id,_face.v1.copy(v1),_face.v2.copy(v2),_face.v3.copy(v3),_face.normalModel.copy(face.normal),!1!==visible||side!==THREE.BackSide&&side!==THREE.DoubleSide||_face.normalModel.negate(),_face.normalModel.applyMatrix3(_normalMatrix).normalize();for(var faceVertexNormals=face.vertexNormals,n=0,nl=Math.min(faceVertexNormals.length,3);n<nl;n++){var normalModel=_face.vertexNormalsModel[n];normalModel.copy(faceVertexNormals[n]),!1!==visible||side!==THREE.BackSide&&side!==THREE.DoubleSide||normalModel.negate(),normalModel.applyMatrix3(_normalMatrix).normalize()}_face.vertexNormalsLength=faceVertexNormals.length;var vertexUvs=faceVertexUvs[f];if(void 0!==vertexUvs)for(var u=0;u<3;u++)_face.uvs[u].copy(vertexUvs[u]);_face.color=face.color,_face.material=material,_face.z=(v1.positionScreen.z+v2.positionScreen.z+v3.positionScreen.z)/3,_face.renderOrder=object.renderOrder,_renderData.elements.push(_face)}}}}}else if(object instanceof THREE.Line){if(_modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix,_modelMatrix),geometry instanceof THREE.BufferGeometry){if(void 0!==(attributes=geometry.attributes).position){for(i=0,l=(positions=attributes.position.array).length;i<l;i+=3)renderList.pushVertex(positions[i],positions[i+1],positions[i+2]);if(void 0!==attributes.color){var colors=attributes.color.array;for(i=0,l=colors.length;i<l;i+=3)renderList.pushColor(colors[i],colors[i+1],colors[i+2])}if(null!==geometry.index)for(i=0,l=(indices=geometry.index.array).length;i<l;i+=2)renderList.pushLine(indices[i],indices[i+1]);else{var step=object instanceof THREE.LineSegments?2:1;for(i=0,l=positions.length/3-1;i<l;i+=step)renderList.pushLine(i,i+1)}}}else if(geometry instanceof THREE.Geometry){if(0===(vertices=object.geometry.vertices).length)continue;(v1=getNextVertexInPool()).positionScreen.copy(vertices[0]).applyMatrix4(_modelViewProjectionMatrix);for(step=object instanceof THREE.LineSegments?2:1,v=1,vl=vertices.length;v<vl;v++)(v1=getNextVertexInPool()).positionScreen.copy(vertices[v]).applyMatrix4(_modelViewProjectionMatrix),(v+1)%step>0||(v2=_vertexPool[_vertexCount-2],_clippedVertex1PositionScreen.copy(v1.positionScreen),_clippedVertex2PositionScreen.copy(v2.positionScreen),!0===clipLine(_clippedVertex1PositionScreen,_clippedVertex2PositionScreen)&&(_clippedVertex1PositionScreen.multiplyScalar(1/_clippedVertex1PositionScreen.w),_clippedVertex2PositionScreen.multiplyScalar(1/_clippedVertex2PositionScreen.w),(_line=getNextLineInPool()).id=object.id,_line.v1.positionScreen.copy(_clippedVertex1PositionScreen),_line.v2.positionScreen.copy(_clippedVertex2PositionScreen),_line.z=Math.max(_clippedVertex1PositionScreen.z,_clippedVertex2PositionScreen.z),_line.renderOrder=object.renderOrder,_line.material=object.material,object.material.vertexColors===THREE.VertexColors&&(_line.vertexColors[0].copy(object.geometry.colors[v]),_line.vertexColors[1].copy(object.geometry.colors[v-1])),_renderData.elements.push(_line)))}}else if(object instanceof THREE.Points){if(_modelViewProjectionMatrix.multiplyMatrices(_viewProjectionMatrix,_modelMatrix),geometry instanceof THREE.Geometry)for(v=0,vl=(vertices=object.geometry.vertices).length;v<vl;v++){vertex=vertices[v];_vector4.set(vertex.x,vertex.y,vertex.z,1),_vector4.applyMatrix4(_modelViewProjectionMatrix),pushPoint(_vector4,object,camera)}else if(geometry instanceof THREE.BufferGeometry){if(void 0!==(attributes=geometry.attributes).position){var positions;for(i=0,l=(positions=attributes.position.array).length;i<l;i+=3)_vector4.set(positions[i],positions[i+1],positions[i+2],1),_vector4.applyMatrix4(_modelViewProjectionMatrix),pushPoint(_vector4,object,camera)}}}else object instanceof THREE.Sprite&&(_vector4.set(_modelMatrix.elements[12],_modelMatrix.elements[13],_modelMatrix.elements[14],1),_vector4.applyMatrix4(_viewProjectionMatrix),pushPoint(_vector4,object,camera))}return!0===sortElements&&_renderData.elements.sort(painterSort),_renderData}};let Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var canvas=document.createElement("canvas");return!(!window.WebGLRenderingContext||!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var element=document.createElement("div");return element.id="webgl-error-message",element.style.fontFamily="monospace",element.style.fontSize="13px",element.style.fontWeight="normal",element.style.textAlign="center",element.style.background="#fff",element.style.color="#000",element.style.padding="1.5em",element.style.width="400px",element.style.margin="5em auto 0",this.webgl||(element.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),element},addGetWebGLMessage:function(parameters){var parent,id,element;parent=void 0!==(parameters=parameters||{}).parent?parameters.parent:document.body,id=void 0!==parameters.id?parameters.id:"oldie",(element=Detector.getWebGLErrorMessage()).id=id,parent.appendChild(element)}};var container;"object"==typeof module&&(module.exports=Detector),THREE.SpriteCanvasMaterial=function(parameters){THREE.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(parameters)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,THREE.SpriteCanvasMaterial.prototype.clone=function(){var material=new THREE.SpriteCanvasMaterial;return material.copy(this),material.color.copy(this.color),material.program=this.program,material},THREE.CanvasRenderer=function(parameters){console.log("THREE.CanvasRenderer",THREE.REVISION),parameters=parameters||{};var _renderData,_elements,_lights,_v1,_v2,_v3,_v1x,_v1y,_v2x,_v2y,_v3x,_v3y,_uvs,_uv1x,_uv1y,_uv2x,_uv2y,_uv3x,_uv3y,_this=this,_projector=new THREE.Projector,_canvas=void 0!==parameters.canvas?parameters.canvas:document.createElement("canvas"),_canvasWidth=_canvas.width,_canvasHeight=_canvas.height,_canvasWidthHalf=Math.floor(_canvasWidth/2),_canvasHeightHalf=Math.floor(_canvasHeight/2),_viewportX=0,_viewportY=0,_viewportWidth=_canvasWidth,_viewportHeight=_canvasHeight,_pixelRatio=1,_context=_canvas.getContext("2d",{alpha:!0===parameters.alpha}),_clearColor=new THREE.Color(0),_clearAlpha=!0===parameters.alpha?0:1,_contextGlobalAlpha=1,_contextGlobalCompositeOperation=0,_contextStrokeStyle=null,_contextFillStyle=null,_contextLineWidth=null,_contextLineCap=null,_contextLineJoin=null,_contextLineDash=[],_color=new THREE.Color,_diffuseColor=new THREE.Color,_emissiveColor=new THREE.Color,_lightColor=new THREE.Color,_patterns={},_clipBox=new THREE.Box2,_clearBox=new THREE.Box2,_elemBox=new THREE.Box2,_ambientLight=new THREE.Color,_directionalLights=new THREE.Color,_pointLights=new THREE.Color,_vector3=new THREE.Vector3,_centroid=new THREE.Vector3,_normal=new THREE.Vector3,_normalViewMatrix=new THREE.Matrix3;function renderSprite(v1,element,material){setOpacity(material.opacity),setBlending(material.blending);var scaleX=element.scale.x*_canvasWidthHalf,scaleY=element.scale.y*_canvasHeightHalf,dist=Math.sqrt(scaleX*scaleX+scaleY*scaleY);if(_elemBox.min.set(v1.x-dist,v1.y-dist),_elemBox.max.set(v1.x+dist,v1.y+dist),material.isSpriteMaterial){var texture=material.map;if(null!==texture){var pattern=_patterns[texture.id];if(void 0!==pattern&&pattern.version===texture.version||(pattern=textureToPattern(texture),_patterns[texture.id]=pattern),void 0!==pattern.canvas){setFillStyle(pattern.canvas);var bitmap=texture.image,ox=bitmap.width*texture.offset.x,oy=bitmap.height*texture.offset.y,sx=bitmap.width*texture.repeat.x,sy=bitmap.height*texture.repeat.y,cx=scaleX/sx,cy=scaleY/sy;_context.save(),_context.translate(v1.x,v1.y),0!==material.rotation&&_context.rotate(material.rotation),_context.translate(-scaleX/2,-scaleY/2),_context.scale(cx,cy),_context.translate(-ox,-oy),_context.fillRect(ox,oy,sx,sy),_context.restore()}}else setFillStyle(material.color.getStyle()),_context.save(),_context.translate(v1.x,v1.y),0!==material.rotation&&_context.rotate(material.rotation),_context.scale(scaleX,-scaleY),_context.fillRect(-.5,-.5,1,1),_context.restore()}else material.isSpriteCanvasMaterial?(setStrokeStyle(material.color.getStyle()),setFillStyle(material.color.getStyle()),_context.save(),_context.translate(v1.x,v1.y),0!==material.rotation&&_context.rotate(material.rotation),_context.scale(scaleX,scaleY),material.program(_context),_context.restore()):material.isPointsMaterial&&(setFillStyle(material.color.getStyle()),_context.save(),_context.translate(v1.x,v1.y),0!==material.rotation&&_context.rotate(material.rotation),_context.scale(scaleX*material.size,-scaleY*material.size),_context.fillRect(-.5,-.5,1,1),_context.restore())}function renderLine(v1,v2,element,material){if(setOpacity(material.opacity),setBlending(material.blending),_context.beginPath(),_context.moveTo(v1.positionScreen.x,v1.positionScreen.y),_context.lineTo(v2.positionScreen.x,v2.positionScreen.y),material.isLineBasicMaterial){if(setLineWidth(material.linewidth),setLineCap(material.linecap),setLineJoin(material.linejoin),material.vertexColors!==THREE.VertexColors)setStrokeStyle(material.color.getStyle());else{var colorStyle1=element.vertexColors[0].getStyle(),colorStyle2=element.vertexColors[1].getStyle();if(colorStyle1===colorStyle2)setStrokeStyle(colorStyle1);else{try{var grad=_context.createLinearGradient(v1.positionScreen.x,v1.positionScreen.y,v2.positionScreen.x,v2.positionScreen.y);grad.addColorStop(0,colorStyle1),grad.addColorStop(1,colorStyle2)}catch(exception){grad=colorStyle1}setStrokeStyle(grad)}}material.isLineDashedMaterial&&setLineDash([material.dashSize,material.gapSize]),_context.stroke(),_elemBox.expandByScalar(2*material.linewidth),material.isLineDashedMaterial&&setLineDash([])}}function renderFace3(v1,v2,v3,uv1,uv2,uv3,element,material){var x0,y0,x1,y1,x2,y2;if(_this.info.render.vertices+=3,_this.info.render.faces++,setOpacity(material.opacity),setBlending(material.blending),_v1x=v1.positionScreen.x,_v1y=v1.positionScreen.y,_v2x=v2.positionScreen.x,_v2y=v2.positionScreen.y,_v3x=v3.positionScreen.x,_v3y=v3.positionScreen.y,x0=_v1x,y0=_v1y,x1=_v2x,y1=_v2y,x2=_v3x,y2=_v3y,_context.beginPath(),_context.moveTo(x0,y0),_context.lineTo(x1,y1),_context.lineTo(x2,y2),_context.closePath(),(material.isMeshLambertMaterial||material.isMeshPhongMaterial||material.isMeshStandardMaterial)&&null===material.map)_diffuseColor.copy(material.color),_emissiveColor.copy(material.emissive),material.vertexColors===THREE.FaceColors&&_diffuseColor.multiply(element.color),_color.copy(_ambientLight),_centroid.copy(v1.positionWorld).add(v2.positionWorld).add(v3.positionWorld).divideScalar(3),function(position,normal,color){for(var l=0,ll=_lights.length;l<ll;l++){var light=_lights[l];if(_lightColor.copy(light.color),light.isDirectionalLight){var lightPosition=_vector3.setFromMatrixPosition(light.matrixWorld).normalize();if((amount=normal.dot(lightPosition))<=0)continue;amount*=light.intensity,color.add(_lightColor.multiplyScalar(amount))}else if(light.isPointLight){var amount;if(lightPosition=_vector3.setFromMatrixPosition(light.matrixWorld),(amount=normal.dot(_vector3.subVectors(lightPosition,position).normalize()))<=0)continue;if(0==(amount*=0==light.distance?1:1-Math.min(position.distanceTo(lightPosition)/light.distance,1)))continue;amount*=light.intensity,color.add(_lightColor.multiplyScalar(amount))}}}(_centroid,element.normalModel,_color),_color.multiply(_diffuseColor).add(_emissiveColor),!0===material.wireframe?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color);else if(material.isMeshBasicMaterial||material.isMeshLambertMaterial||material.isMeshPhongMaterial||material.isMeshStandardMaterial){if(null!==material.map)material.map.mapping===THREE.UVMapping&&(_uvs=element.uvs,patternPath(_v1x,_v1y,_v2x,_v2y,_v3x,_v3y,_uvs[uv1].x,_uvs[uv1].y,_uvs[uv2].x,_uvs[uv2].y,_uvs[uv3].x,_uvs[uv3].y,material.map));else null!==material.envMap?material.envMap.mapping===THREE.SphericalReflectionMapping&&(_normal.copy(element.vertexNormalsModel[uv1]).applyMatrix3(_normalViewMatrix),_uv1x=.5*_normal.x+.5,_uv1y=.5*_normal.y+.5,_normal.copy(element.vertexNormalsModel[uv2]).applyMatrix3(_normalViewMatrix),_uv2x=.5*_normal.x+.5,_uv2y=.5*_normal.y+.5,_normal.copy(element.vertexNormalsModel[uv3]).applyMatrix3(_normalViewMatrix),_uv3x=.5*_normal.x+.5,_uv3y=.5*_normal.y+.5,patternPath(_v1x,_v1y,_v2x,_v2y,_v3x,_v3y,_uv1x,_uv1y,_uv2x,_uv2y,_uv3x,_uv3y,material.envMap)):(_color.copy(material.color),material.vertexColors===THREE.FaceColors&&_color.multiply(element.color),!0===material.wireframe?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color))}else material.isMeshNormalMaterial?(_normal.copy(element.normalModel).applyMatrix3(_normalViewMatrix),_color.setRGB(_normal.x,_normal.y,_normal.z).multiplyScalar(.5).addScalar(.5),!0===material.wireframe?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color)):(_color.setRGB(1,1,1),!0===material.wireframe?strokePath(_color,material.wireframeLinewidth,material.wireframeLinecap,material.wireframeLinejoin):fillPath(_color))}function strokePath(color,linewidth,linecap,linejoin){setLineWidth(linewidth),setLineCap(linecap),setLineJoin(linejoin),setStrokeStyle(color.getStyle()),_context.stroke(),_elemBox.expandByScalar(2*linewidth)}function fillPath(color){setFillStyle(color.getStyle()),_context.fill()}function textureToPattern(texture){if(0===texture.version||texture instanceof THREE.CompressedTexture||texture instanceof THREE.DataTexture)return{canvas:void 0,version:texture.version};var image=texture.image;if(!1===image.complete)return{canvas:void 0,version:0};var repeatX=texture.wrapS===THREE.RepeatWrapping||texture.wrapS===THREE.MirroredRepeatWrapping,repeatY=texture.wrapT===THREE.RepeatWrapping||texture.wrapT===THREE.MirroredRepeatWrapping,mirrorX=texture.wrapS===THREE.MirroredRepeatWrapping,mirrorY=texture.wrapT===THREE.MirroredRepeatWrapping,canvas=document.createElement("canvas");canvas.width=image.width*(mirrorX?2:1),canvas.height=image.height*(mirrorY?2:1);var context=canvas.getContext("2d");context.setTransform(1,0,0,-1,0,image.height),context.drawImage(image,0,0),!0===mirrorX&&(context.setTransform(-1,0,0,-1,image.width,image.height),context.drawImage(image,-image.width,0)),!0===mirrorY&&(context.setTransform(1,0,0,1,0,0),context.drawImage(image,0,image.height)),!0===mirrorX&&!0===mirrorY&&(context.setTransform(-1,0,0,1,image.width,0),context.drawImage(image,-image.width,image.height));var repeat="no-repeat";!0===repeatX&&!0===repeatY?repeat="repeat":!0===repeatX?repeat="repeat-x":!0===repeatY&&(repeat="repeat-y");var pattern=_context.createPattern(canvas,repeat);return texture.onUpdate&&texture.onUpdate(texture),{canvas:pattern,version:texture.version}}function patternPath(x0,y0,x1,y1,x2,y2,u0,v0,u1,v1,u2,v2,texture){var pattern=_patterns[texture.id];if(void 0!==pattern&&pattern.version===texture.version||(pattern=textureToPattern(texture),_patterns[texture.id]=pattern),void 0===pattern.canvas)return setFillStyle("rgba( 0, 0, 0, 1)"),void _context.fill();setFillStyle(pattern.canvas);var a,b,c,d,e,f,det,idet,offsetX=texture.offset.x/texture.repeat.x,offsetY=texture.offset.y/texture.repeat.y,width=texture.image.width*texture.repeat.x,height=texture.image.height*texture.repeat.y;u1=(u1+offsetX)*width,v1=(v1+offsetY)*height,u2=(u2+offsetX)*width,v2=(v2+offsetY)*height,x1-=x0,y1-=y0,x2-=x0,y2-=y0,0!==(det=(u1-=u0=(u0+offsetX)*width)*(v2-=v0=(v0+offsetY)*height)-(u2-=u0)*(v1-=v0))&&(e=x0-(a=(v2*x1-v1*x2)*(idet=1/det))*u0-(c=(u1*x2-u2*x1)*idet)*v0,f=y0-(b=(v2*y1-v1*y2)*idet)*u0-(d=(u1*y2-u2*y1)*idet)*v0,_context.save(),_context.transform(a,b,c,d,e,f),_context.fill(),_context.restore())}function expand(v1,v2,pixels){var idet,x=v2.x-v1.x,y=v2.y-v1.y,det=x*x+y*y;0!==det&&(x*=idet=pixels/Math.sqrt(det),y*=idet,v2.x+=x,v2.y+=y,v1.x-=x,v1.y-=y)}function setOpacity(value){_contextGlobalAlpha!==value&&(_context.globalAlpha=value,_contextGlobalAlpha=value)}function setBlending(value){_contextGlobalCompositeOperation!==value&&(value===THREE.NormalBlending?_context.globalCompositeOperation="source-over":value===THREE.AdditiveBlending?_context.globalCompositeOperation="lighter":value===THREE.SubtractiveBlending?_context.globalCompositeOperation="darker":value===THREE.MultiplyBlending&&(_context.globalCompositeOperation="multiply"),_contextGlobalCompositeOperation=value)}function setLineWidth(value){_contextLineWidth!==value&&(_context.lineWidth=value,_contextLineWidth=value)}function setLineCap(value){_contextLineCap!==value&&(_context.lineCap=value,_contextLineCap=value)}function setLineJoin(value){_contextLineJoin!==value&&(_context.lineJoin=value,_contextLineJoin=value)}function setStrokeStyle(value){_contextStrokeStyle!==value&&(_context.strokeStyle=value,_contextStrokeStyle=value)}function setFillStyle(value){_contextFillStyle!==value&&(_context.fillStyle=value,_contextFillStyle=value)}function setLineDash(value){_contextLineDash.length!==value.length&&(_context.setLineDash(value),_contextLineDash=value)}void 0===_context.setLineDash&&(_context.setLineDash=function(){}),this.domElement=_canvas,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return _context},this.getContextAttributes=function(){return _context.getContextAttributes()},this.getPixelRatio=function(){return _pixelRatio},this.setPixelRatio=function(value){void 0!==value&&(_pixelRatio=value)},this.setSize=function(width,height,updateStyle){_canvasWidth=width*_pixelRatio,_canvasHeight=height*_pixelRatio,_canvas.width=_canvasWidth,_canvas.height=_canvasHeight,_canvasWidthHalf=Math.floor(_canvasWidth/2),_canvasHeightHalf=Math.floor(_canvasHeight/2),!1!==updateStyle&&(_canvas.style.width=width+"px",_canvas.style.height=height+"px"),_clipBox.min.set(-_canvasWidthHalf,-_canvasHeightHalf),_clipBox.max.set(_canvasWidthHalf,_canvasHeightHalf),_clearBox.min.set(-_canvasWidthHalf,-_canvasHeightHalf),_clearBox.max.set(_canvasWidthHalf,_canvasHeightHalf),_contextGlobalAlpha=1,_contextGlobalCompositeOperation=0,_contextStrokeStyle=null,_contextFillStyle=null,_contextLineWidth=null,_contextLineCap=null,_contextLineJoin=null,this.setViewport(0,0,width,height)},this.setViewport=function(x,y,width,height){_viewportX=x*_pixelRatio,_viewportY=y*_pixelRatio,_viewportWidth=width*_pixelRatio,_viewportHeight=height*_pixelRatio},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(color,alpha){_clearColor.set(color),_clearAlpha=void 0!==alpha?alpha:1,_clearBox.min.set(-_canvasWidthHalf,-_canvasHeightHalf),_clearBox.max.set(_canvasWidthHalf,_canvasHeightHalf)},this.setClearColorHex=function(hex,alpha){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(hex,alpha)},this.getClearColor=function(){return _clearColor},this.getClearAlpha=function(){return _clearAlpha},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===_clearBox.isEmpty()&&(_clearBox.intersect(_clipBox),_clearBox.expandByScalar(2),_clearBox.min.x=_clearBox.min.x+_canvasWidthHalf,_clearBox.min.y=-_clearBox.min.y+_canvasHeightHalf,_clearBox.max.x=_clearBox.max.x+_canvasWidthHalf,_clearBox.max.y=-_clearBox.max.y+_canvasHeightHalf,_clearAlpha<1&&_context.clearRect(0|_clearBox.min.x,0|_clearBox.max.y,_clearBox.max.x-_clearBox.min.x|0,_clearBox.min.y-_clearBox.max.y|0),_clearAlpha>0&&(setOpacity(1),setBlending(THREE.NormalBlending),setFillStyle("rgba("+Math.floor(255*_clearColor.r)+","+Math.floor(255*_clearColor.g)+","+Math.floor(255*_clearColor.b)+","+_clearAlpha+")"),_context.fillRect(0|_clearBox.min.x,0|_clearBox.max.y,_clearBox.max.x-_clearBox.min.x|0,_clearBox.min.y-_clearBox.max.y|0)),_clearBox.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(scene,camera){if(void 0!==camera.isCamera){var background=scene.background;background&&background.isColor?(setOpacity(1),setBlending(THREE.NormalBlending),setFillStyle(background.getStyle()),_context.fillRect(0,0,_canvasWidth,_canvasHeight)):!0===this.autoClear&&this.clear(),_this.info.render.vertices=0,_this.info.render.faces=0,_context.setTransform(_viewportWidth/_canvasWidth,0,0,-_viewportHeight/_canvasHeight,_viewportX,_canvasHeight-_viewportY),_context.translate(_canvasWidthHalf,_canvasHeightHalf),_renderData=_projector.projectScene(scene,camera,this.sortObjects,this.sortElements),_elements=_renderData.elements,_lights=_renderData.lights,_normalViewMatrix.getNormalMatrix(camera.matrixWorldInverse),function(){_ambientLight.setRGB(0,0,0),_directionalLights.setRGB(0,0,0),_pointLights.setRGB(0,0,0);for(var l=0,ll=_lights.length;l<ll;l++){var light=_lights[l],lightColor=light.color;light.isAmbientLight?_ambientLight.add(lightColor):light.isDirectionalLight?_directionalLights.add(lightColor):light.isPointLight&&_pointLights.add(lightColor)}}();for(var e=0,el=_elements.length;e<el;e++){var element=_elements[e],material=element.material;if(void 0!==material&&0!==material.opacity){if(_elemBox.makeEmpty(),element instanceof THREE.RenderableSprite)(_v1=element).x*=_canvasWidthHalf,_v1.y*=_canvasHeightHalf,renderSprite(_v1,element,material);else if(element instanceof THREE.RenderableLine)_v1=element.v1,_v2=element.v2,_v1.positionScreen.x*=_canvasWidthHalf,_v1.positionScreen.y*=_canvasHeightHalf,_v2.positionScreen.x*=_canvasWidthHalf,_v2.positionScreen.y*=_canvasHeightHalf,_elemBox.setFromPoints([_v1.positionScreen,_v2.positionScreen]),!0===_clipBox.intersectsBox(_elemBox)&&renderLine(_v1,_v2,element,material);else if(element instanceof THREE.RenderableFace){if(_v1=element.v1,_v2=element.v2,_v3=element.v3,_v1.positionScreen.z<-1||_v1.positionScreen.z>1)continue;if(_v2.positionScreen.z<-1||_v2.positionScreen.z>1)continue;if(_v3.positionScreen.z<-1||_v3.positionScreen.z>1)continue;_v1.positionScreen.x*=_canvasWidthHalf,_v1.positionScreen.y*=_canvasHeightHalf,_v2.positionScreen.x*=_canvasWidthHalf,_v2.positionScreen.y*=_canvasHeightHalf,_v3.positionScreen.x*=_canvasWidthHalf,_v3.positionScreen.y*=_canvasHeightHalf,material.overdraw>0&&(expand(_v1.positionScreen,_v2.positionScreen,material.overdraw),expand(_v2.positionScreen,_v3.positionScreen,material.overdraw),expand(_v3.positionScreen,_v1.positionScreen,material.overdraw)),_elemBox.setFromPoints([_v1.positionScreen,_v2.positionScreen,_v3.positionScreen]),!0===_clipBox.intersectsBox(_elemBox)&&renderFace3(_v1,_v2,_v3,0,1,2,element,material)}_clearBox.union(_elemBox)}}_context.setTransform(1,0,0,1,0,0)}else console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.")}},Detector.webgl||Detector.addGetWebGLMessage();var camera,scene,renderer,particles,particle,particlesStars,starField,parameters,size,sunSmall,sunMedium,sunLarge,SEPARATION=350,AMOUNTX=10,AMOUNTY=10,count=0,materials=[],mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseMove(event){mouseX=event.clientX-windowHalfX,mouseY=event.clientY-windowHalfY}!function(){container=document.createElement("div"),document.body.appendChild(container),(camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4)).position.z=1e3,scene=new THREE.Scene,particles=[];for(var diamondGeometry=new THREE.SphereGeometry(20,6,2),diamondMmaterial=new THREE.MeshNormalMaterial({wireframe:!0}),i=0,ix=0;ix<AMOUNTX;ix++)for(var iy=0;iy<AMOUNTY;iy++)(particle=particles[i++]=new THREE.Mesh(diamondGeometry,diamondMmaterial)).position.x=ix*SEPARATION-AMOUNTX*SEPARATION/2,particle.position.z=iy*SEPARATION-AMOUNTY*SEPARATION/2,scene.add(particle);var sunWireframeMaterial=new THREE.MeshNormalMaterial({wireframe:!0}),sunSmallGeometry=new THREE.SphereGeometry(100,6,9);(sunSmall=new THREE.Mesh(sunSmallGeometry,sunWireframeMaterial)).position.set(-10,20,100),scene.add(sunSmall);var sunMediumGeometry=new THREE.SphereGeometry(200,6,9);(sunMedium=new THREE.Mesh(sunMediumGeometry,sunWireframeMaterial)).position.set(-10,20,100),scene.add(sunMedium);var sunLargeGeometry=new THREE.SphereGeometry(275,6,8);(sunLarge=new THREE.Mesh(sunLargeGeometry,sunWireframeMaterial)).position.set(-10,20,100),scene.add(sunLarge),starField=new THREE.Geometry;for(i=0;i<1500;i++){var stars=new THREE.Vector3;stars.x=2e3*Math.random()-1e3,stars.y=2e3*Math.random()-1e3,stars.z=2e3*Math.random()-1e3,starField.vertices.push(stars)}for(parameters=[[[1,1,1],5]],i=0;i<parameters.length;i++)size=.8,materials[i]=new THREE.PointsMaterial({size:size}),particlesStars=new THREE.Points(starField,materials[i]),scene.add(particlesStars);(renderer=new THREE.CanvasRenderer).setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),document.addEventListener("mousemove",onDocumentMouseMove,!1),window.addEventListener("resize",onWindowResize,!1)}(),function animate(){requestAnimationFrame(animate);!function(){camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y),camera.lookAt(scene.position),sunSmall.rotation.y+=.004,sunMedium.rotation.x-=.003,sunLarge.rotation.z-=.002;for(var i=0,ix=0;ix<AMOUNTX;ix++)for(var iy=0;iy<AMOUNTY;iy++)(particle=particles[i++]).position.y=110*Math.sin(.3*(ix+count))+80*Math.sin(.5*(iy+count)),particle.rotation.y+=.004,particle.rotation.x+=.003,particle.rotation.z+=.002;renderer.render(scene,camera),count+=.01}()}(),$("canvas").parent("div").addClass("zfix"),$(".zfix").on("touchmove",function(evt){evt.preventDefault()})}},work={init:function(){$(".project label").on("click",function(){$(this).parent().parent().toggleClass("open")})}};